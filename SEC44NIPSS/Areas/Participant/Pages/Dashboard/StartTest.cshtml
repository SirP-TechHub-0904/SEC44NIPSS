@page
@model SEC44NIPSS.Areas.Participant.Pages.Dashboard.StartTestModel

@{
    ViewData["Title"] = "StartTest";
    @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
    {
        Layout = "_NIPSS";
    }

}

<div class="box">
    <div class="box-header">
        <input id="timert" value="@Model.UserAnswer.StartTime.Value.ToString("MMM dd, yyyy HH: mm: ss")" hidden="hidden" />
        <input id="quisd" value="@Model.Qid" hidden="hidden" />
        <table class="table table-striped table-bordered" border="1">
            <tr>
                <th>Title</th>
                <th>@Model.UserAnswer.Title</th>
            </tr>
            <tr>
                <th>Start Time</th>
                <th>@Model.UserAnswer.StartTime.Value.ToString("hh:mm tt")</th>
            </tr>
            <tr>
                <th>Duration</th>
                <th>5 min</th>
            </tr>
            <tr>
                <th>Finish Time</th>
                <th>
                    @{
                        var d = Model.UserAnswer.StartTime.Value.AddMinutes(5);
                    }
                    @d.ToString("hh:mm tt")
                </th>
            </tr>
        </table>

    </div>
    @{ int nxt = Model.AnswerList.SN + 1;}
    <input id="idx" value="@Model.AnswerList.SN" hidden="hidden" />
    <input id="uiidxx" value="@Model.AnswerList.UserAnswerId" hidden="hidden" />
    <!-- /.box-header -->
    <div class="box-body">

        <div class="row">
            <div class="col-md-12" style="">
                @*<div class="callout" style="min-height: 80px; width:; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 15px; word-break: break-all; word-wrap: break-word;">
                        <span style="word-wrap:break-word;word-break:break-all"> (@Model.AnswerList.SN) @Model.AnswerList.RapidQuestion.Question</span>
                    </div>*@

                <div class="callout bg-primary" style="min-height: 80px; width:; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 15px; word-break: break-all; word-wrap: break-word;">
                    <h4> (@Model.AnswerList.SN) @Model.AnswerList.RapidQuestion.Question</h4>


                </div>
            </div>

            @if (String.IsNullOrEmpty(Model.AnswerList.Choose))
            {

                <div class="col-md-6">
                    <a onclick="optionone()" id="cOption1" class="callout" style="cursor: pointer; min-height: 60px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                        (A) @Model.AnswerList.RapidQuestion.RapidOptions.Option1
                    </a>
                </div>
                <div class="col-md-6">
                    <a onclick="optiontwo()" id="cOption2" class="callout" style="cursor: pointer; min-height: 60px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                        (B) @Model.AnswerList.RapidQuestion.RapidOptions.Option2
                    </a>
                </div>
                <div class="col-md-6">
                    <a onclick="optionthree()" id="cOption3" class="callout" style="cursor: pointer; min-height: 60px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                        (C) @Model.AnswerList.RapidQuestion.RapidOptions.Option3
                    </a>
                </div>
                <div class="col-md-6">
                    <a onclick="optionfour()" id="cOption4" class="callout" style="cursor: pointer; min-height: 60px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                        (D) @Model.AnswerList.RapidQuestion.RapidOptions.Option4
                    </a>
                </div>
            }
            else
            {
                if (Model.AnswerList.Choose == "Option1" && Model.AnswerList.Answer == "Option1")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:green;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (A) @Model.AnswerList.RapidQuestion.RapidOptions.Option1
                        </div>
                    </div>
                }
                else if (Model.AnswerList.Choose != "Option1" && Model.AnswerList.Answer == "Option1")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:green;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (A) @Model.AnswerList.RapidQuestion.RapidOptions.Option1
                        </div>
                    </div>
                }
                else if (Model.AnswerList.Choose == "Option1" && Model.AnswerList.Answer != "Option1")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:red;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (A) @Model.AnswerList.RapidQuestion.RapidOptions.Option1
                        </div>
                    </div>
                }
                else
                {
                    <div class="col-md-6">
                        <div class="callout" style="min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (A) @Model.AnswerList.RapidQuestion.RapidOptions.Option1
                        </div>
                    </div>
                }
                //
                if (Model.AnswerList.Choose == "Option2" && Model.AnswerList.Answer == "Option2")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:green;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (B) @Model.AnswerList.RapidQuestion.RapidOptions.Option2
                        </div>
                    </div>
                }
                else if (Model.AnswerList.Choose != "Option2" && Model.AnswerList.Answer == "Option2")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:green;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (B) @Model.AnswerList.RapidQuestion.RapidOptions.Option2
                        </div>
                    </div>
                }
                else if (Model.AnswerList.Choose == "Option2" && Model.AnswerList.Answer != "Option2")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:red;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (B) @Model.AnswerList.RapidQuestion.RapidOptions.Option2
                        </div>
                    </div>
                }
                else
                {
                    <div class="col-md-6">
                        <div class="callout" style="min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (B) @Model.AnswerList.RapidQuestion.RapidOptions.Option2
                        </div>
                    </div>
                }
                //
                if (Model.AnswerList.Choose == "Option3" && Model.AnswerList.Answer == "Option3")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:green;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (C) @Model.AnswerList.RapidQuestion.RapidOptions.Option3
                        </div>
                    </div>
                }
                else if (Model.AnswerList.Choose != "Option3" && Model.AnswerList.Answer == "Option3")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:green;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (C) @Model.AnswerList.RapidQuestion.RapidOptions.Option3
                        </div>
                    </div>
                }
                else if (Model.AnswerList.Choose == "Option3" && Model.AnswerList.Answer != "Option3")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:red;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (C) @Model.AnswerList.RapidQuestion.RapidOptions.Option3
                        </div>
                    </div>
                }
                else
                {
                    <div class="col-md-6">
                        <div class="callout" style="min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (C) @Model.AnswerList.RapidQuestion.RapidOptions.Option3
                        </div>
                    </div>
                }
                //
                if (Model.AnswerList.Choose == "Option4" && Model.AnswerList.Answer == "Option4")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:green;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (D) @Model.AnswerList.RapidQuestion.RapidOptions.Option4
                        </div>
                    </div>
                }
                else if (Model.AnswerList.Choose != "Option4" && Model.AnswerList.Answer == "Option4")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:green;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (D) @Model.AnswerList.RapidQuestion.RapidOptions.Option4
                        </div>
                    </div>
                }
                else if (Model.AnswerList.Choose == "Option4" && Model.AnswerList.Answer != "Option4")
                {
                    <div class="col-md-6">
                        <div class="callout" style="background-color:red;min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (D) @Model.AnswerList.RapidQuestion.RapidOptions.Option4
                        </div>
                    </div>
                }
                else
                {
                    <div class="col-md-6">
                        <div class="callout" style="min-height: 50px; width: 100%; display: flex; text-transform: uppercase; color: #000000; box-shadow: 2px 2px 2px 2px #2b2828; font-weight: 900; font-size: 20px; margin: 10px 0px; word-break: break-all; ">
                            (D) @Model.AnswerList.RapidQuestion.RapidOptions.Option4
                        </div>
                    </div>
                }
            }
        </div>

        <div class="row">
            <div class="col-md-12">
                @if (Model.AnswerList.SN == 20)
                {
                    <a asp-page="/Dashboard/Result" asp-route-id="@Model.AnswerList.UserAnswerId" class="btn bg-black" style="margin-top:20px;float:right;">NEXT</a>

                }
                else
                {
                    <a asp-page="/Dashboard/StartTest" asp-route-qid="@nxt" asp-route-id="@Model.Qid" class="btn bg-black" style="margin-top:20px;float:right;">NEXT</a>

                }
            </div>
        </div>
    </div>
</div>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    @*console.log(document.getElementById("timert").value)
        var timex = document.getElementById("timert").value;

         phone: $('#optionx').val(),
                    phone: $('#idx').val()
        Result

        console.log(document.getElementById("quisd").value)*@

    <script>

        function optionone() {
            $.ajax({
                type: 'GET',
                url: 'StartTest?handler=Resultt',
                dataType: "json",
                data: {
                    ioptionx: "Option1",
                    iidx: $('#idx').val(),
                    uiidx: $('#uiidxx').val()



                },
                contentType: "application/json; charset=utf-8",
                error: function () {
                    console.log("error");
                },
                success: function (data) {
                    console.log("yes");

                    console.log(data);

                    if (data === "true") {
                        var div = document.getElementById('cOption1');
                        div.style.backgroundColor = 'green';
                    }
                    else if (data.includes("Result")) {
                        var linkk = data.substring(6);
                        window.location.href = "https://sec44nipss.com/Participant/Dashboard/Result?id=" + linkk;
                    }
                    else {
                        //false Option1
                        var div = document.getElementById('cOption1');
                        div.style.backgroundColor = 'red';
                        var sx = data.substring(6);
                        console.log("sub str");
                        console.log(sx);
                        console.log("sub str");
                        if (sx === "Option2") {
                            console.log("opti 2");
                            var div = document.getElementById('cOption2');
                            div.style.backgroundColor = 'green';
                        } else if (sx === "Option3") {
                            console.log("opti 3");
                            var div = document.getElementById('cOption3');
                            div.style.backgroundColor = 'green';
                        } else if (sx === "Option4") {
                            var div = document.getElementById('cOption4');
                            console.log("opti 4");
                            div.style.backgroundColor = 'green';
                        }
                    }

                    $("#cOption1").removeAttr("onclick");
                    $("#cOption2").removeAttr("onclick");
                    $("#cOption3").removeAttr("onclick");
                    $("#cOption4").removeAttr("onclick");

                }
            });
        }

    </script>

    <script>

        function optiontwo() {
            $.ajax({
                type: 'GET',
                url: 'StartTest?handler=Resultt',
                dataType: "json",
                data: {
                    ioptionx: "Option2",
                    iidx: $('#idx').val(),
                    uiidx: $('#uiidxx').val()
                },
                contentType: "application/json; charset=utf-8",
                error: function () {
                    console.log("error");
                },
                success: function (data) {
                    console.log("yes");

                    console.log(data);

                    if (data === "true") {
                        var div = document.getElementById('cOption2');
                        div.style.backgroundColor = 'green';
                    } else if (data.includes("Result")) {
                        var linkk = data.substring(6);
                        window.location.href = "https://sec44nipss.com/Participant/Dashboard/Result?id=" + linkk;
                    } else {
                        //false Option1
                        var div = document.getElementById('cOption2');
                        div.style.backgroundColor = 'red';
                        var sx = data.substring(6);
                        console.log("sub str");
                        console.log(sx);
                        console.log("sub str");
                        if (sx === "Option1") {
                            console.log("opti 2");
                            var div = document.getElementById('cOption1');
                            div.style.backgroundColor = 'green';
                        } else if (sx === "Option3") {
                            console.log("opti 3");
                            var div = document.getElementById('cOption3');
                            div.style.backgroundColor = 'green';
                        } else if (sx === "Option4") {
                            var div = document.getElementById('cOption4');
                            console.log("opti 4");
                            div.style.backgroundColor = 'green';
                        }
                    }

                    $("#cOption1").removeAttr("onclick");
                    $("#cOption2").removeAttr("onclick");
                    $("#cOption3").removeAttr("onclick");
                    $("#cOption4").removeAttr("onclick");

                }
            });
        }

    </script>

    <script>

        function optionthree() {
            $.ajax({
                type: 'GET',
                url: 'StartTest?handler=Resultt',
                dataType: "json",
                data: {
                    ioptionx: "Option3",
                    iidx: $('#idx').val(),
                    uiidx: $('#uiidxx').val()
                },
                contentType: "application/json; charset=utf-8",
                error: function () {
                    console.log("error");
                },
                success: function (data) {
                    console.log("yes");

                    console.log(data);

                    if (data === "true") {
                        var div = document.getElementById('cOption3');
                        div.style.backgroundColor = 'green';
                    } else if (data.includes("Result")) {
                        var linkk = data.substring(6);
                        window.location.href = "https://sec44nipss.com/Participant/Dashboard/Result?id=" + linkk;
                    } else {
                        //false Option1
                        var div = document.getElementById('cOption3');
                        div.style.backgroundColor = 'red';
                        var sx = data.substring(6);
                        console.log("sub str");
                        console.log(sx);
                        console.log("sub str");
                        if (sx === "Option2") {
                            console.log("opti 2");
                            var div = document.getElementById('cOption2');
                            div.style.backgroundColor = 'green';
                        } else if (sx === "Option1") {
                            console.log("opti 3");
                            var div = document.getElementById('cOption1');
                            div.style.backgroundColor = 'green';
                        } else if (sx === "Option4") {
                            var div = document.getElementById('cOption4');
                            console.log("opti 4");
                            div.style.backgroundColor = 'green';
                        }
                    }

                    $("#cOption1").removeAttr("onclick");
                    $("#cOption2").removeAttr("onclick");
                    $("#cOption3").removeAttr("onclick");
                    $("#cOption4").removeAttr("onclick");

                }
            });
        }

    </script>

    <script>

        function optionfour() {
            $.ajax({
                type: 'GET',
                url: 'StartTest?handler=Resultt',
                dataType: "json",
                data: {
                    ioptionx: "Option4",
                    iidx: $('#idx').val(),
                    uiidx: $('#uiidxx').val()
                },
                contentType: "application/json; charset=utf-8",
                error: function () {
                    console.log("error");
                },
                success: function (data) {
                    console.log("yes");

                    console.log(data);

                    if (data === "true") {
                        var div = document.getElementById('cOption4');
                        div.style.backgroundColor = 'green';
                    } else if (data.includes("Result")) {
                        var linkk = data.substring(6);
                        window.location.href = "https://sec44nipss.com/Participant/Dashboard/Result?id=" + linkk;
                    } else {
                        //false Option1
                        var div = document.getElementById('cOption4');
                        div.style.backgroundColor = 'red';
                        var sx = data.substring(6);
                        console.log("sub str");
                        console.log(sx);
                        console.log("sub str");
                        if (sx === "Option2") {
                            console.log("opti 2");
                            var div = document.getElementById('cOption2');
                            div.style.backgroundColor = 'green';
                        } else if (sx === "Option3") {
                            console.log("opti 3");
                            var div = document.getElementById('cOption3');
                            div.style.backgroundColor = 'green';
                        } else if (sx === "Option1") {
                            var div = document.getElementById('cOption1');
                            console.log("opti 4");
                            div.style.backgroundColor = 'green';
                        }
                    }

                    $("#cOption1").removeAttr("onclick");
                    $("#cOption2").removeAttr("onclick");
                    $("#cOption3").removeAttr("onclick");
                    $("#cOption4").removeAttr("onclick");

                }
            });
        }

    </script>



    <script type="text/javascript">
        function preventBack() { window.history.forward(); }
        setTimeout("preventBack()", 0);
        window.onunload = function () { null };
    </script>

}