@page
@model SEC44NIPSS.Areas.Participant.Pages.TicketPage.RequisitionformModel
@{
}


<div class="row">
    <div class="col-xs-12">
        <div class="box">
            <div class="box-header">
                <div class="box-title">
                    <h1 class="page-title">
                        WORK AND MAINTENANCE DEPARTMENT
                    </h1>
                    <span class="sub-text">
                        Maintenance Requisition Form
                    </span>
                </div>
            </div>


            <div class="box-body">

                <div class="rs-about style2 md-pt-70 md-pb-70" style="padding:30px 0 10px 0;">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12" style="margin:10px 0">

                                <form method="post" style="margin-bottom:20px;" enctype="multipart/form-data">
                                    <div asp-validation-summary="All" class="text-danger"></div>

                                    <div class="row">
                                        @if (TempData["usernull"] != null)
                                        {


                                            <div class="col-lg-12 col-md-12 col-sm-12 mb-30">
                                                <div class="form-group">
                                                    <label>Fullname</label>
                                                    <input class="form-control" readonly="readonly" required="required" placeholder="Login to access your fullname">
                                                </div>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="col-lg-12 col-md-12 col-sm-12 mb-30">
                                                <div class="form-group">
                                                    <label>Fullname</label>
                                                    <input class="form-control" readonly="readonly" asp-for="Input.Fullname" value="@Model.Profile.Title @Model.Profile.FullName" required="required">
                                                </div>
                                            </div>
                                        }


                                        <div class="col-lg-6 col-md-6 col-sm-6 mb-30">
                                            <div class="form-group">
                                                <label for="email">House/Office Number</label>
                                                <select asp-for="Input.Office" class="form-control" required="required">
                                                    <option>Choose your location</option>
                                                    <option value="Lake Side 1">Lake Side 1</option>
                                                    <option value="Lake Side 2">Lake Side 2</option>
                                                    <option value="Lake Side 3">Lake Side 3</option>
                                                    <option value="Lake Side 4">Lake Side 4</option>
                                                    <option value="Lake Side 5">Lake Side 5</option>
                                                    <option value="Lake Side 6">Lake Side 6</option>
                                                    <option value="Lake Side 7">Lake Side 7</option>
                                                    <option value="Lake Side 8">Lake Side 8</option>
                                                    <option value="Lake Side 9">Lake Side 9</option>
                                                    <option value="Lake Side 10">Lake Side 10</option>
                                                    <option value="Lake Side 11">Lake Side 11</option>
                                                    <option value="Lake Side 12">Lake Side 12</option>
                                                    <option value="Lake Side 13">Lake Side 13</option>
                                                    <option value="Lake Side 14">Lake Side 14</option>
                                                    <option value="Lake Side 15">Lake Side 15</option>
                                                    <option value="Lake Side 16">Lake Side 16</option>
                                                    <option value="Lake Side 17">Lake Side 17</option>
                                                    <option value="Lake Side 18">Lake Side 18</option>
                                                    <option value="Lake Side 19">Lake Side 19</option>
                                                    <option value="Lake Side 20">Lake Side 20</option>
                                                    <option value="Lake Side 21">Lake Side 21</option>
                                                    <option value="Lake Side 22">Lake Side 22</option>
                                                    <option value="Lake Side 23">Lake Side 23</option>
                                                    <option value="Lake Side 24">Lake Side 24</option>
                                                    <option value="Lake Side 25">Lake Side 25</option>
                                                    <option value="Lake Side 26">Lake Side 26</option>
                                                    <option value="PS Number 1">PS Number 1</option>
                                                    <option value="PS Number 2">PS Number 2</option>
                                                    <option value="PS Number 3">PS Number 3</option>
                                                    <option value="PS Number 4">PS Number 4</option>
                                                    <option value="PS Number 5">PS Number 5</option>
                                                    <option value="PS Number 6">PS Number 6</option>
                                                    <option value="PS Number 7">PS Number 7</option>
                                                    <option value="PS Number 8">PS Number 8</option>
                                                    <option value="PS Number 9">PS Number 9</option>
                                                    <option value="PS Number 10">PS Number 10</option>
                                                    <option value="PS Number 11">PS Number 11</option>
                                                    <option value="PS Number 12">PS Number 12</option>
                                                    <option value="PS Number 13">PS Number 13</option>
                                                    <option value="PS Number 14">PS Number 14</option>
                                                    <option value="PS Number 15">PS Number 15</option>
                                                    <option value="PS Number 16">PS Number 16</option>
                                                    <option value="PS Number 17">PS Number 17</option>
                                                    <option value="PS Number 18">PS Number 18</option>
                                                    <option value="PS Number 19">PS Number 19</option>
                                                    <option value="PS Number 20">PS Number 20</option>
                                                    <option value="PS Number 21">PS Number 21</option>
                                                    <option value="PS Number 22">PS Number 22</option>
                                                    <option value="PS Number 23">PS Number 23</option>
                                                    <option value="PS Number 24">PS Number 24</option>
                                                    <option value="PS Number 25">PS Number 25</option>
                                                    <option value="PS Number 26">PS Number 26</option>
                                                    <option value="PS Number 27">PS Number 27</option>
                                                    <option value="PS Number 28">PS Number 28</option>
                                                    <option value="PS Number 29">PS Number 29</option>
                                                    <option value="PS Number 30">PS Number 30</option>
                                                    <option value="PS Number 31">PS Number 31</option>
                                                    <option value="PS Number 32">PS Number 32</option>
                                                    <option value="PS Number 33">PS Number 33</option>
                                                    <option value="PS Number 34">PS Number 34</option>
                                                    <option value="PS Number 35">PS Number 35</option>
                                                    <option value="PS Number 36">PS Number 36</option>
                                                    <option value="PS Number 37">PS Number 37</option>
                                                    <option value="PS Number 38">PS Number 38</option>
                                                    <option value="PS Number 39">PS Number 39</option>
                                                    <option value="PS Number 40">PS Number 40</option>
                                                    <option value="PS Number 41">PS Number 41</option>
                                                    <option value="PS Number 42">PS Number 42</option>
                                                    <option value="PS Number 43">PS Number 43</option>
                                                    <option value="PS Number 44">PS Number 44</option>
                                                    <option value="PS Number 45">PS Number 45</option>
                                                    <option value="PS Number 46">PS Number 46</option>
                                                    <option value="PS Number 47">PS Number 47</option>
                                                    <option value="PS Number 48">PS Number 48</option>
                                                    <option value="PS Number 49">PS Number 49</option>
                                                    <option value="PS Number 50">PS Number 50</option>
                                                    <option value="PS Number 51">PS Number 51</option>
                                                    <option value="PS Number 52">PS Number 52</option>
                                                    <option value="PS Number 53">PS Number 53</option>
                                                    <option value="PS Number 54">PS Number 54</option>
                                                    <option value="PS Number 55">PS Number 55</option>
                                                    <option value="PS Number 56">PS Number 56</option>
                                                    <option value="PS Number 57">PS Number 57</option>
                                                    <option value="PS Number 58">PS Number 58</option>
                                                    <option value="PS Number 59">PS Number 59</option>
                                                    <option value="PS Number 60">PS Number 60</option>
                                                    <option value="PS Number 61">PS Number 61</option>
                                                    <option value="PS Number 62">PS Number 62</option>
                                                    <option value="PS Number 63">PS Number 63</option>
                                                    <option value="PS Number 64">PS Number 64</option>
                                                    <option value="PS Number 65">PS Number 65</option>
                                                    <option value="PS Number 66">PS Number 66</option>
                                                    <option value="PS Number 67">PS Number 67</option>
                                                    <option value="PS Number 68">PS Number 68</option>
                                                    <option value="PS Number 69">PS Number 69</option>
                                                    <option value="PS Number 70">PS Number 70</option>
                                                    <option value="PS Number 71">PS Number 71</option>
                                                    <option value="PS Number 72">PS Number 72</option>
                                                    <option value="PS Number 73">PS Number 73</option>
                                                    <option value="PS Number 74">PS Number 74</option>
                                                    <option value="PS Number 75">PS Number 75</option>
                                                    <option value="PS Number 76">PS Number 76</option>
                                                    <option value="PS Number 77">PS Number 77</option>
                                                    <option value="PS Number 78">PS Number 78</option>
                                                    <option value="PS Number 79">PS Number 79</option>
                                                    <option value="PS Number 80">PS Number 80</option>
                                                </select>
                                            </div>
                                        </div>
                                        @if (TempData["usernull"] != null)
                                        {


                                            <div class="col-lg-6 col-md-6 col-sm-6 mb-30">
                                                <div class="form-group">
                                                    <label>Study Group</label>
                                                    <input class="form-control" readonly="readonly" required="required" placeholder="Login to access your Study Group">
                                                </div>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="col-lg-6 col-md-6 col-sm-6 mb-30">
                                                <div class="form-group">
                                                    <label>Study Group</label>
                                                    <input class="form-control" readonly="readonly" asp-for="Input.StudyGroup" value="@Model.Profile.StudyGroupMemeber.StudyGroup.Title" required="required">
                                                </div>
                                            </div>
                                        }
                                        @if (TempData["usernull"] != null)
                                        {
                                            <div class="col-lg-6 col-md-6 col-sm-6 mb-30">
                                                <div class="form-group">
                                                    <label for="email">Email</label>
                                                    <input class="form-control" readonly="readonly" required="required" placeholder="Login to access your email">
                                                </div>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="col-lg-6 col-md-6 col-sm-6 mb-30">
                                                <div class="form-group">
                                                    <label for="email">Email</label>
                                                    <input class="form-control" id="email" readonly="readonly" type="email" asp-for="Input.Email" value="@Model.Profile.User.Email" required="required">
                                                </div>
                                            </div>
                                        }
                                        @if (TempData["usernull"] != null)
                                        {
                                            <div class="col-lg-6 col-md-6 col-sm-6 mb-30">
                                                <div class="form-group">
                                                    <label for="email">Phone Number</label>
                                                    <input class="form-control" required="required" placeholder="Login to access your phone number" readonly="readonly">
                                                </div>
                                            </div>
                                        }
                                        else
                                        {

                                            <div class="col-lg-6 col-md-6 col-sm-6 mb-30">
                                                <div class="form-group">
                                                    <label for="email">Phone Number</label>
                                                    <input class="form-control" asp-for="Input.PhoneNumber" readonly="readonly" value="@Model.Profile.PhoneNumber" required="required">
                                                </div>
                                            </div>
                                        }
                                        <div class="col-lg-6 col-md-6 col-sm-6 mb-30">
                                            <div class="form-group">
                                                <label>Choose the category of Maintanace</label>
                                                <select asp-for="Input.Category" asp-items="ViewBag.Category" required="required" id="Category" class="form-control">
                                                    <option>Select Category</option>

                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6 col-sm-6 mb-30">
                                            <div class="form-group">
                                                <label>Sub Category</label>
                                                <select asp-for="Input.SubCategory" id="Sub" class="form-control"></select>

                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12 mb-30">
                                            <div class="form-group">
                                                <label>Priority</label>
                                                <select class="form-control" type="text" asp-for="Input.Priority" required="required">
                                                    <option>Choose Priority</option>
                                                    <option value="Emergency">Emergency</option>
                                                    <option value="High">High</option>
                                                    <option value="Medium">Medium</option>
                                                    <option value="Low">Low</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-lg-12 mb-10">
                                            <div class="form-group">
                                                <textarea class="form-control" asp-for="Input.Message" placeholder="Your Complain Here" required="required"></textarea>
                                            </div>
                                        </div>

                                        <div class="col-lg-12 col-md-12 col-sm-12 mb-30">
                                            <div class="form-group">
                                                <label for="email">Upload Image of Item/damage if any</label>
                                                <input class="form-control" type="file" accept="image/*" name="filesPhoto" id="gallery-photo-add" />
                                                <div class="gallery"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="btn-part">
                                        <div class="form-group mb-0">
                                            <input class="readon submit orange-submit" type="submit" value="Submit Now">
                                        </div>
                                    </div>

                                </form>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script type="text/jscript">
        $(function () {
            $('#Category').change(function () {
                console.log("enter")


                $.ajax({
                    type: 'GET',
                    url: 'Requisitionform?handler=SubCat',
                    dataType: "json",
                    data: {
                        id: $('#Category').val()
                    },
                    contentType: "application/json; charset=utf-8",
                    error: function () {
                        console.log("error");
                    },
                    success: function (data) {
                        console.log("yes");

                        console.log(data);
                        var items = '<option>Choose Specified Challenge</option>';
                        $.each(jQuery.map(data, function (i, local) {
                            items += "<option value='" + i.value + "'>" + i.text + "</option>";
                            console.log("vin")
                        }));

                        $('#Sub').html(items);

                    }
                });
                console.log("pass")
            });
        });
    </script>
    <script type="text/javascript">
        $(function () {
            // multiple images prevuiew in browser
            var imagesPreview = function (input, placeToInsertImagePreview) {
                if (input.files) {
                    var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.gif|.png|.bmp)$/;
                    var filesAmount = input.files.length;
                    if (filesAmount <= 5) {
                        for (i = 0; i < filesAmount; i++) {
                            var reader = new FileReader();
                            reader.onload = function (event) {
                                $($.parseHTML('<img>')).attr('src', event.target.result).attr('width', '100px').attr('height', 'auto').attr('margin', '10px').attr('padding', '10px').appendTo(placeToInsertImagePreview);
                            }
                            reader.readAsDataURL(input.files[i]);
                        }
                    } else {
                        window.alert("You cant upload more 1 image");
                    }
                }
            };
            $('#gallery-photo-add').on('change', function () {
                imagesPreview(this, 'div.gallery');
            });
        });

        $('.dropzone').html5imageupload();
    </script>
}
